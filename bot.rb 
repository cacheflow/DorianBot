require "Twitter"
require "treat"
include Treat::Core::DSL

	## So right here we're passing our twitter 
	## credentials as a block and saving it in 
	## client variable 
	client = Twitter::REST::Client.new do |config|
		config.consumer_key = ENV["TWITTER_KEY"]
		config.consumer_secret = ENV["TWITTER_SECRET"]
		config.access_token = ENV["TWITTER_TOKEN"]
		config.access_token_secret = ENV["TWITTER_TOKEN_SECRET"]
	end 

	story = document("example.txt")
		story.apply(:chunk, :segment, :tokenize)
		tweetables = Array(story.sentences.sample.to_s)
				tweetables.each do |sen| 
					if sen.length <= 140
							client.home_timeline.each do 
							|past_tweets| 
								if past_tweets != sen 
									puts client.update(sen) 
									break 
					end 				
							end 
		end 
	end

	
	 

 	
